<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Power Forge - Premium Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background-image: url('https://img.freepik.com/free-photo/bigfoot-represented-neon-glow_23-2151322865.jpg?t=st=1743240556~exp=1743244156~hmac=7e76561af1709e33a19b0dd6a1a39818bd762ff0fcd3398aafa1f2549f200347&w=1380'); /* Replace with your image URL */
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            animation: backgroundShift 15s infinite alternate;
            position: relative;
        }

        /* Cyberpunk Background Effects */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://img.freepik.com/free-vector/energy-sphere-representing-source_1196-979.jpg?t=st=1743241327~exp=1743244927~hmac=52c60b55d02f72cab36b3c38ac56300f9a424f2e48cf5c84229b2c426f71d348&w=740');
            opacity: 0.1;
            z-index: 0;
            animation: circuitMove 10s linear infinite alternate;
        }

        @keyframes circuitMove {
            0% { background-position: 0 0; }
            100% { background-position: 1000px 1000px; }
        }

        .container {
            text-align: center;
            color: #fff;
            padding: 30px;
            background: rgba(10, 10, 30, 0.85);
            border: 2px solid #00ddeb;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 221, 235, 0.7), inset 0 0 15px rgba(255, 0, 255, 0.3);
            max-width: 700px;
            width: 90%;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
            animation: containerGlow 3s infinite alternate;
        }

        @keyframes containerGlow {
            0% { box-shadow: 0 0 30px rgba(0, 221, 235, 0.7), inset 0 0 15px rgba(255, 0, 255, 0.3); }
            100% { box-shadow: 0 0 50px rgba(255, 0, 255, 0.7), inset 0 0 25px rgba(0, 221, 235, 0.5); }
        }

        .title {
            font-size: 3em;
            color: #00ddeb;
            text-shadow: 0 0 15px #00ddeb, 0 0 30px #ff00ff, 0 0 45px #00ddeb;
            animation: titlePulse 2s infinite alternate;
            margin-bottom: 20px;
        }

        @keyframes titlePulse {
            0% { text-shadow: 0 0 15px #00ddeb, 0 0 30px #ff00ff; }
            100% { text-shadow: 0 0 30px #ff00ff, 0 0 45px #00ddeb; }
        }

        .step {
            display: none;
            opacity: 0;
            transition: opacity 0.7s ease;
        }

        .step.active {
            display: block;
            opacity: 1;
        }

        h2 {
            color: #ff00ff;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #00ddeb;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        input {
            padding: 12px;
            font-size: 1.3em;
            border: 2px solid #00ddeb;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            outline: none;
            width: 100%;
            max-width: 300px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus {
            border-color: #ff00ff;
            box-shadow: 0 0 15px #ff00ff;
        }

        button {
            padding: 12px 30px;
            font-size: 1.3em;
            margin-top: 20px;
            background: linear-gradient(45deg, #00ddeb, #ff00ff, #00ddeb);
            border: none;
            border-radius: 30px;
            color: #fff;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            text-transform: uppercase;
            font-weight: 700;
        }

        button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #00ddeb, 0 0 40px #ff00ff;
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.5s;
        }

        button:hover::before {
            transform: translate(-50%, -50%) scale(1);
        }

        .result-box {
            font-size: 1.6em;
            padding: 20px;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #00ddeb;
            border-radius: 12px;
            color: #fff;
            text-shadow: 0 0 8px #00ddeb;
            transform: perspective(600px) rotateX(15deg);
            animation: fadeIn 1.2s ease;
        }

        .shapes-container {
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .shape {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #ff00ff, #00ddeb);
            border-radius: 12px;
            animation: spin 3s infinite linear;
            box-shadow: 0 0 15px #ff00ff, 0 0 25px #00ddeb;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .shape:hover {
            transform: scale(1.3);
            box-shadow: 0 0 25px #00ddeb, 0 0 40px #ff00ff;
        }

        .card {
            padding: 25px;
            margin: 20px auto;
            background: linear-gradient(135deg, #00ddeb, #ff00ff, #00ddeb);
            background-size: 400% 400%;
            background-image: linear-gradient(135deg, #00ddeb, #ff00ff, #00ddeb), url("https://cdn.pixabay.com/photo/2018/06/09/15/25/technology-3464573_1280.jpg");
            background-blend-mode: multiply;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.7);
            color: #000126;
            font-size: 1.3em;
            transform: perspective(1200px) rotateY(15deg);
            animation: cardReveal 1.8s ease;
            transition: transform 0.5s;
        }
        .card:hover {
            transform: perspective(1200px) rotateY(25deg);
        }

        .card h3 {
            margin: 15px 0;
            color: #fff;
            text-shadow: 0 0 8px #ffffff;
            font-size: 1.5em;
        }

        .card p {
            margin: 8px 0;
            font-weight: 700;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin-top: 25px;
            box-shadow: 0 0 10px #00ddeb;
        }

        .progress-bar div {
            height: 100%;
            background: linear-gradient(90deg, #00ddeb, #ff00ff);
            width: 0;
            transition: width 0.7s ease;
        }

        .description-btn, .manual-search-btn {
            position: fixed;
            padding: 12px 25px;
            background: linear-gradient(45deg, #00ddeb, #ff00ff);
            border: none;
            border-radius: 30px;
            color: #fff;
            cursor: pointer;
            font-size: 1.1em;
            transition: transform 0.3s, box-shadow 0.3s;
            z-index: 1000;
            text-decoration: none;
            display: inline-block;
            text-transform: uppercase;
        }

        .description-btn {
            top: 20px;
            left: 20px;
        }

        .manual-search-btn {
            bottom: 20px;
            left: 20px;
        }

        .description-btn:hover, .manual-search-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #00ddeb, 0 0 40px #ff00ff;
        }

        .manual-search-container {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: rgba(10, 10, 30, 0.85);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 17, 255, 0.7);
            max-width: 350px;
            width: 90%;
            display: none;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .manual-search-container.active {
            display: block;
        }

        .manual-search-container h2 {
            font-size: 1.5em;
        }

        @keyframes glow {
            0% { text-shadow: 0 0 10px #00ddeb; }
            100% { text-shadow: 0 0 20px #ff00ff; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes cardReveal {
            0% { opacity: 0; transform: perspective(1200px) rotateY(-90deg); }
            100% { opacity: 1; transform: perspective(1200px) rotateY(15deg); }
        }
    </style>
</head>
<body>
    <a href="description.html" class="description-btn">Description</a>
    <button onclick="toggleManualSearch()" class="manual-search-btn">Manual Search</button>

    <div class="container">
        <h1 class="title">Life Power Forge</h1>

        <div class="progress-bar">
            <div id="progress"></div>
        </div>

        <!-- Step 1: Name Input -->
        <div id="step1" class="step active">
            <h2>Enter Your Name</h2>
            <input type="text" id="playerName" placeholder="Your Name">
            <button onclick="startGame()">Forge Your Power</button>
        </div>

        <!-- Step 2: Rank Reveal -->
        <div id="step2" class="step">
            <h2>Your Rank</h2>
            <div id="rankResult" class="result-box"></div>
            <button onclick="showLuckyNumber()">Reveal Lucky Number</button>
        </div>

        <!-- Step 3: Lucky Number & Shapes -->
        <div id="step3" class="step">
            <h2>Your Lucky Number</h2>
            <div id="luckyNumber" class="result-box"></div>
            <div id="shapesResult" class="shapes-container"></div>
            <button onclick="showPower()">Unleash Power</button>
        </div>

        <!-- Step 4: Base Power -->
        <div id="step4" class="step">
            <h2>Your Base Power</h2>
            <div id="powerResult" class="result-box"></div>
            <button onclick="showBonus()">Draw Bonus Power</button>
        </div>

        <!-- Step 5: Bonus Power -->
        <div id="step5" class="step">
            <h2>Bonus Power</h2>
            <div id="bonusResult" class="result-box"></div>
            <button onclick="showFinalCard()">View Your Power Card</button>
        </div>

        <!-- Step 6: Final Result Card -->
        <div id="step6" class="step">
            <h2>Your Power Card</h2>
            <div id="finalCard" class="card"></div>
            <button onclick="resetGame()">Forge Again</button>
        </div>

        <!-- Add the SoundCloud player here -->
        <section style="display: none;">
            <h2>Listen to Music</h2>
            <iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/29933008&color=%23ff5500&auto_play=true"></iframe>
        </section>

        <audio autoplay>
            <source src="https://api.soundcloud.com/tracks/29933008/stream?client_id=YOUR_CLIENT_ID" type="audio/mpeg">
        </audio>
    </div>

    <!-- Manual Search Section -->
    <div id="manualSearchContainer" class="manual-search-container">
        <h2>Manual Search</h2>
        <input type="text" id="manualName" placeholder="Your Name">
        <input type="number" id="manualLuckyNumber" placeholder="Your Lucky Number">
        <button onclick="manualSearch()">Search</button>
        <div id="manualResult" class="result-box"></div>
    </div>

    <script>
        const shapes = [
            "Circle", "Triangle", "Square", "Star", "Spiral", "Hexagon", "Pentagon", "Crescent",
            "Diamond", "Octagon", "Cross", "Wave", "Arrow", "Cloud", "Flame", "Drop",
            "Lightning", "Skull", "Heart", "Infinity"
        ];

        const extraShapes = [
            "Galaxy", "Comet", "Nebula", "Supernova", "Black Hole", "Pulsar", "Quasar",
            "Asteroid", "Meteor", "Constellation"
        ];

        const basePowers = [
            "Stellar Energy Blaster", "Temporal Sniper", "Elemental Fortress", "Thunder Sprinter",
            "Crystal Necromancer", "Sonic Inferno", "Empathic Healer", "Storm Archer",
            "Infinite Tide Ruler", "Illusive Titan", "Nova Burst", "Chrono Shifter",
            "Dark Thunder Pyre", "Eternal Velocity Surge", "Crystal Sanctuary", "Tempest Marksman",
            "Aqua Empath", "Electric Precision Strike", "Infernal Time Reaper", "Boundless Shadow Colossus"
        ];

        const bonusPowers = [
            "Dragon Sovereign", "Void Whisperer", "Celestial Overlord", "Phantom Monarch",
            "Eternal Samurai", "Chaos Weaver", "Titan’s Roar", "Astral Sage", "Blood Reaper",
            "Divine Guardian", "Goblin Tickler", "Rubber Duck Summoner", "Sneezy Storm",
            "Puddle Jumper", "Nap Master", "Clumsy Knight", "Toast Mage", "Squeaky Voice",
            "Paper Cut Lord", "Shiny Rock Collector"
        ];

        let currentStep = 1;
        let playerData = {};

        function startGame() {
            const name = document.getElementById("playerName").value.trim();
            if (!name) return alert("Please enter your name!");

            // Calculate Rank
            let sum = 0;
            for (let char of name.toUpperCase()) {
                if (char >= 'A' && char <= 'Z') sum += char.charCodeAt(0) - 64;
            }
            const luckyNumber = Math.floor(Math.random() * 999) + 1;
            sum += luckyNumber;
            const avg = sum / (name.length + luckyNumber.toString().length);
            let rank;

            // Determine rank with rare ranks included
            const luckyNumberSum = luckyNumber.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
            if (luckyNumber.toString().includes('0')) {
                rank = "S"; // Legendary rank if lucky number contains 0
            } else if (sum === 0 && luckyNumberSum === 0) {
                rank = "X"; // Mythic rank if both sums are zero
            } else {
                rank = avg <= 4 ? "G" : avg <= 8 ? "F" : avg <= 12 ? "E" : avg <= 16 ? "D" : avg <= 20 ? "C" : avg <= 24 ? "B" : "A";
            }

            playerData = { name, rank, luckyNumber };
            document.getElementById("rankResult").innerText = `${name}, Your Rank: ${rank}`;
            switchStep(2);
        }

        function showLuckyNumber() {
            const luckyNumber = playerData.luckyNumber;
            const luckyNumberStr = luckyNumber.toString();
            let selectedShapes = [];

            // Assign shapes based on lucky number digits
            for (let digit of luckyNumberStr) {
                selectedShapes.push(shapes[parseInt(digit) - 1]);
            }

            // Assign extra shapes for Legendary and Mythic ranks
            if (playerData.rank === "Legendary" || playerData.rank === "Mythic") {
                const extraShapeCount = playerData.rank === "Legendary" ? 1 : 2;
                for (let i = 0; i < extraShapeCount; i++) {
                    selectedShapes.push(extraShapes[Math.floor(Math.random() * extraShapes.length)]);
                }
            }

            playerData.shapes = selectedShapes;
            document.getElementById("luckyNumber").innerText = `Lucky Number: ${luckyNumber}`;
            const shapesContainer = document.getElementById("shapesResult");
            shapesContainer.innerHTML = selectedShapes.map(shape => `<div class="shape">${shape}</div>`).join("");
            switchStep(3);
        }

        function showPower() {
            // Calculate base power index using lucky number and name sum
            const nameSum = playerData.name.split('').reduce((sum, char) => sum + char.charCodeAt(0), 0);
            const powerIndex = (playerData.luckyNumber + nameSum) % basePowers.length;
            playerData.power = basePowers[powerIndex];
            document.getElementById("powerResult").innerText = `Power: ${playerData.power}`;
            switchStep(4);
        }

        function showBonus() {
            // Sum the digits of the lucky number
            const luckyNumberSum = playerData.luckyNumber.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
            playerData.bonus = bonusPowers[luckyNumberSum % bonusPowers.length];
            document.getElementById("bonusResult").innerText = `Bonus Power: ${playerData.bonus}`;
            switchStep(5);
        }

        function showFinalCard() {
            const card = document.getElementById("finalCard");
            card.innerHTML = `
                <h3>${playerData.name}'s Power Card</h3>
                <p>Rank: ${playerData.rank}</p>
                <p>Lucky Number: ${playerData.luckyNumber}</p>
                <p>Shapes: ${playerData.shapes.join(", ")}</p>
                <p>Base Power: ${playerData.power}</p>
                <p>Bonus Power: ${playerData.bonus}</p>
            `;
            switchStep(6);
        }

        function resetGame() {
            playerData = {};
            switchStep(1);
            document.getElementById("playerName").value = "";
        }

        function switchStep(step) {
            document.querySelectorAll(".step").forEach(s => s.classList.remove("active"));
            document.getElementById(`step${step}`).classList.add("active");
            currentStep = step;
            updateProgressBar();
        }

        function updateProgressBar() {
            const progress = document.getElementById("progress");
            progress.style.width = `${(currentStep / 6) * 100}%`;
        }

        function toggleManualSearch() {
            const manualSearchContainer = document.getElementById("manualSearchContainer");
            manualSearchContainer.classList.toggle("active");
        }

        function manualSearch() {
            const name = document.getElementById("manualName").value.trim();
            const luckyNumber = parseInt(document.getElementById("manualLuckyNumber").value.trim());
            if (!name || isNaN(luckyNumber)) return alert("Please enter valid name and lucky number!");

            // Calculate Rank
            let sum = 0;
            for (let char of name.toUpperCase()) {
                if (char >= 'A' && char <= 'Z') sum += char.charCodeAt(0) - 64;
            }
            sum += luckyNumber;
            const avg = sum / (name.length + luckyNumber.toString().length);
            let rank;

            // Determine rank with rare ranks included
            const luckyNumberSum = luckyNumber.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
            if (luckyNumber.toString().includes('0')) {
                rank = "Legendary"; // Legendary rank if lucky number contains 0
            } else if (sum === 0 && luckyNumberSum === 0) {
                rank = "Mythic"; // Mythic rank if both sums are zero
            } else {
                rank = avg <= 4 ? "G" : avg <= 8 ? "F" : avg <= 12 ? "E" : avg <= 16 ? "D" : avg <= 20 ? "C" : avg <= 24 ? "B" : "A";
            }

            // Assign shapes based on lucky number digits
            let selectedShapes = [];
            const luckyNumberStr = luckyNumber.toString();
            for (let digit of luckyNumberStr) {
                selectedShapes.push(shapes[parseInt(digit) - 1]);
            }

            // Assign extra shapes for Legendary and Mythic ranks
            if (rank === "Legendary" || rank === "Mythic") {
                const extraShapeCount = rank === "Legendary" ? 1 : 2;
                for (let i = 0; i < extraShapeCount; i++) {
                    selectedShapes.push(extraShapes[Math.floor(Math.random() * extraShapes.length)]);
                }
            }

            // Calculate base power index using lucky number and name sum
            const nameSum = name.split('').reduce((sum, char) => sum + char.charCodeAt(0), 0);
            const powerIndex = (luckyNumber + nameSum) % basePowers.length;
            const power = basePowers[powerIndex];

            // Sum the digits of the lucky number
            const bonus = bonusPowers[luckyNumberSum % bonusPowers.length];

            document.getElementById("manualResult").innerHTML = `
                <h3>${name}'s Power Card</h3>
                <p>Rank: ${rank}</p>
                <p>Lucky Number: ${luckyNumber}</p>
                <p>Shapes: ${selectedShapes.join(", ")}</p>
                <p>Base Power: ${power}</p>
                <p>Bonus Power: ${bonus}</p>
            `;
        }

        // Add sound effects and background music
        const clickSound = new Audio('path/to/click.mp3');
        const backgroundMusic = new Audio('path/to/background.mp3');
        backgroundMusic.loop = true;
        backgroundMusic.volume = 0.5;

        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', () => {
                clickSound.play();
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            backgroundMusic.play();
        });

        // Add mute functionality
        document.addEventListener('keydown', (event) => {
            if (event.key === 'm') {
                backgroundMusic.muted = !backgroundMusic.muted;
            }
        });
    </script>
</body>
</html>
